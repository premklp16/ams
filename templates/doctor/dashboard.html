{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Doctor Dashboard</title>
<link rel="stylesheet" href="{% static 'doctor/css/main.css' %}">
</head>
<body>

<header>
  <h1>Welcome Dr. {{ doctor.name }}</h1>

  <div class="nav-buttons">
    <a href="{% url 'doctor_profile' %}">Profile</a>
    <a href="{% url 'logout_user' %}">Logout</a>
  </div>
</header>

<main>
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Patient Name</th>
        <th>Description</th>
      </tr>
    </thead>

    <tbody>
      {% for book in bookings %}
      <tr>
        <td>{{ book.timeslot.date }}</td>
        <td>{{ book.timeslot.time }}</td>
        <td>{{ book.patient.name }}</td>
        <td>{{ book.description }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" style="text-align:center;">No Appointments Yet</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <h2 style="margin-top:40px;">Today's Timeslots</h2>

<table>
  <thead>
    <tr>
      <th>Time</th>
      <th>Status</th>
      <th>Patient</th>
    </tr>
  </thead>

  <tbody>
    {% for slot in todays_slots %}
    <tr>
      <td>{{ slot.time }}</td>

      <td>
        {% if slot.is_booked %}
          <span style="color:red;font-weight:bold;">Booked</span>
        {% else %}
          <span style="color:green;font-weight:bold;">Available</span>
        {% endif %}
      </td>

      <td>
        {% if slot.is_booked %}
            {% for book in bookings %}
                {% if book.timeslot.id == slot.id %}
                    {{ book.patient.name }}
                {% endif %}
            {% endfor %}
        {% else %}
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="3" style="text-align:center;">No timeslots added for today</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

</main>

</body>

</body>
</html>